<!DOCTYPE html>
<html class="bodybg-a">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1.0, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta content="email=no" name="format-detection" />
    <!-- <link rel="shortcut icon" href="/images/i.ico"> -->
    <link type="text/css" rel="stylesheet" href="css/style.css" />
    <title>预约商品表单 - 一品云管家</title>
</head>

<body>
    <div class="container bodybg-a">
        <div class="titlebar">
            <h1 class="h1-title">预约商品</h1><a class="a-back" href="#">返回</a>
        </div>
        <div class="toptip"><span class="s-toptip">谢谢！请填写预约信息</span> <a class="a-back" href="#">返回</a>
        </div>


        <div class="cont-a">
            <p class="p-btn mar-t20"><a class="col_6 btn-a tabTitle tabTitleNow" href="#">到门店看货</a><a class="col_6 btn-a tabTitle" href="#">送货上门</a>
            </p>
            <div class="formcont">
                <form class="validateForm" action="test.html">
                    <input type="hidden" id="bookingType" class="txt" name="bookingType" value="1" />
                    <p class="p-item">
                        <input type="text" class="txt require" name="name" rel="请填写您的姓名" placeholder="您的姓名(必填)" />
                    </p>
                    <p class="p-item">
                        <input type="text" class="txt require" name="phone" rel="请填写您的联系电话，方便我们联系您" placeholder="联系电话(必填)" />
                    </p>
                    <p class="p-item p-bookingType" rel="1">
                        <textarea class="txta" name="remarks" placeholder="预约留言(选填)"></textarea>
                    </p>
                    <p class="p-item p-bookingType hide" rel="2">
                        <textarea class="txta require" name="address" rel="请填写收货地址，以便收货" placeholder="收货地址(必填)"></textarea>
                    </p>
            </div>
            <p class="p-btn"><a class="col_12 btn-a bg-pink btnBooking" href="#">提交预约</a>
            </p>
            </form>
            <h3 class="h3-title-a">
                <span class="s-title">我预约的商品</span>
            </h3>
            <div class="col_4 imgauto">
                <img src="images/nopic.png" height="148" width="148" alt="">
            </div>
            <div class="col_8 proAbs">
                <h4 class="h4-protitle"><a href="#" class="a-title">麦动2014夏装新款女装修身连衣裙</a>
                </h4>
                <p class="pink">优惠价：￥269.00</p>
            </div>
        </div>

    </div>

<script type="text/javascript">
document.write('<script src="js/' + ('__proto__' in {} ? 'zepto.min' : 'jquery-1.8.2.min') + '.js"><\/script>');//引入库文件
</script>
<script type="text/javascript">
var bk = {
    init: function() {
        this.tab()
        this.valid();
    },
    tab: function() { //tab切换
        var $tab = $('.tabTitle');
        var $cont = $('.p-bookingType');
        var $type = $('#bookingType');
        $tab.click(function() {
            var ix = $tab.index(this);
            $tab.removeClass('tabTitleNow').eq(ix).addClass('tabTitleNow');
            var $now = $cont.eq(ix);
            $cont.addClass('hide');
            $now.removeClass('hide');
            $type.val($now.attr('rel'));
            return false;
        });
    },
    valid: function() {//验证
        var $tipP = $('.toptip');
        var $tip = $('.s-toptip');
        $('.btnBooking').click(function() {
            var valid = validateFn();
            //window.console && console.log(valid);
            if (valid) {
                $tip.text('谢谢！请填写预约信息');
                $('.validateForm').submit();
            };
            return false;
        });

        function validateFn(form) {
            var ok = true;
            var $form = $(form);
            var $requrie = $('.require');
            $requrie.each(function(i, v) {
                if ($(this).val() == '') { //如果值为空
                    var $par = $(this).parent();
                    if (!$par.hasClass('hide')) { //如果出于显示状态
                        var msg = $(this).attr('rel');
                        //alert(msg);
                        $tipP.addClass('bg-eee')
                        setTimeout(function () {
                           $tipP.removeClass('bg-eee');
                        },200)
                        $tip.text(msg);
                        ok = false;
                        $(this).focus();
                        return false;
                    };
                };
            });
            return ok;
        }
    }
}

$(function() {
    bk.init();//运行
});

</script>

</body>

</html>
